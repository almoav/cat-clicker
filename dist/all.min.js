$(function(){var t={init:function(){localStorage.cats=JSON.stringify([]),localStorage.catIndex=0},add:function(t){var e=JSON.parse(localStorage.cats);e.push(t),localStorage.cats=JSON.stringify(e)},getAllCats:function(){return JSON.parse(localStorage.cats)},setCat:function(t){var e=JSON.parse(localStorage.cats);e[localStorage.catIndex]=t,localStorage.cats=JSON.stringify(e)},setIndex:function(t){localStorage.catIndex=t},getCat:function(){var t=JSON.parse(localStorage.cats);return t[localStorage.catIndex]}},e={addAllCats:function(){var e=[{name:"derpy",url:"img/derpy.jpg",count:0},{name:"furpy",url:"img/furpy.jpg",count:0},{name:"lurpy",url:"img/lurpy.jpg",count:0},{name:"smurpy",url:"img/smurpy.jpg",count:0},{name:"ted",url:"img/ted.jpg",count:0}],a=e.length;for(i=0;i<a;i++)t.add(e[i]);n.render()},getCats:function(){return t.getAllCats()},getCurrentCat:function(){return t.getCat()},setCurrentCat:function(e){for(catList=t.getAllCats(),listLen=catList.length,i=0;i<listLen;i++)if(catList[i].name===e){t.setIndex(i);break}a.render(),c.fillInputs()},clickCat:function(){cat=t.getCat(),cat.count++,this.saveCat(cat)},saveCat:function(e){t.setCat(e),a.render(),n.render(),c.fillInputs()},init:function(){t.init(),n.init(),c.init(),e.addAllCats(),a.init(),e.setCurrentCat()}},n={init:function(){n.render()},render:function(){var t=document.getElementById("cat_container");t.innerHTML="",e.getCats().forEach(function(n){catElem=document.createElement("img"),catElem.id=n.name,catElem.className="cat",catElem.src=n.url,catText=document.createElement("span"),catText.className="cat-span",catText.innerHTML=n.name,catBox=document.createElement("div"),catBox.className="cat-box",catBox.appendChild(catText),catBox.appendChild(catElem),t.appendChild(catBox),catElem.addEventListener("click",function(){e.setCurrentCat(this.id)})})}},a={init:function(){this.catCounter=document.getElementById("counter"),this.catViewer=document.getElementById("cat_viewer");e.getCurrentCat();this.catViewer.addEventListener("click",function(){e.clickCat()}),this.render()},render:function(){var t=e.getCurrentCat();this.catCounter.innerHTML=t.name+" count: "+t.count,this.catViewer.src=t.url}},c={init:function(){var t=document.getElementById("admin_area"),e=document.getElementById("btn-admin"),n=document.getElementById("btn-admin-save"),a=document.getElementById("btn-admin-cancel");this.nameInput=document.getElementById("input-admin-name"),this.urlInput=document.getElementById("input-admin-url"),this.countInput=document.getElementById("input-admin-count"),t.style.display="none",thisCopy=this,e.addEventListener("click",function(){t.style.display="initial",thisCopy.fillInputs()}),n.addEventListener("click",function(){thisCopy.saveInputs(),t.style.display="none"}),a.addEventListener("click",function(){t.style.display="none"})},fillInputs:function(){cat=e.getCurrentCat(),this.nameInput.value=cat.name,this.urlInput.value=cat.url,this.countInput.value=cat.count},saveInputs:function(){cat=e.getCurrentCat(),cat.name=this.nameInput.value,cat.url=this.urlInput.value,cat.count=this.countInput.value,e.saveCat(cat)}};e.init()});